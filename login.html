<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
   
    <link rel="stylesheet" href="input.css">
    <link rel="icon" type="image/x-icon" href="/Resources/favicon.png">
</head>
<body >
    <img src="./Resources/adi.png" class="fixed top-0 -z-30 left-0 h-96 w-96"> 
    
    <p class="fixed  font-extrabold left-5 mt-5 text-xl z-50 underline decoration-purple-400  md:hidden">XMeme.</p>
    <p class=" fixed hidden font-extrabold mx-10 mt-10  text-5xl underline decoration-purple-400 md:block">XMeme.</p>

   <nav class="z-40  fixed max-[460px]:bg-white  max-[460px]:shadow-md w-full" >
        
        <ul class="flex justify-end space-x-6 mr-5 my-5  text-slate-700">
            <li><a href="./signup.html"  class=" hover:text-purple-500">Sign up</a></li>
            
            <li> <a href="./contact.html" class=" hover:text-purple-500">Contact</a>  </li>
        </ul>
       
   </nav>
  
   <div class= "w-1/2 h-full fixed -z-20 mr-5 justify-end ml-[50rem]" >
    <img src = "./Resources/xback.png" class="ml-40 mt-20">
   </div>


    <div class=" flex z-10 h-full w-full justify-center items-center">
        <div class="mt-28 mb-16"> 
         <form class=" h-96 w-96 rounded-xl shadow-2xl bg-white bg-opacity-90 max-[460px]:w-[290px]" id="loginForm"> 
             <h2 class="text-slate-700 pt-6 font-bold text-3xl ml-28 max-[460px]:ml-20 max-[460px]:text-lg" id="usr_lgn"> User Login </h2>
             <p class="mx-6 my-3 mt-12 text-slate-500">Username *</p>
             <input type="text" class=" border-2 border-gray-200 rounded-lg mx-4  w-[22rem] px-3 max-[460px]:w-max" required  name="username">
            <br>
            <p class="mx-6 my-3 text-slate-500">Password *</p>
            <input type="password" required class=" border-2 border-gray-200 rounded-lg mx-4  w-[22rem] px-3 max-[460px]:w-max" name="password">
            <input type="submit" value="login" class="cursor-pointer ml-28 mt-16 bg-gradient-to-r from-purple-400 to-pink-400 h-10 w-36 rounded-lg text-gray-900 font-semibold active:outline-purple-400 active:outline-4 active:outline active:outline-offset-2 hover:shadow-none shadow-md"  >
            
         </form>
        </div>

    </div>
    <footer class="bg-gradient-to-r from-purple-400 to-pink-400 bottom-0 fixed w-full text-center max-[460px]:h-6 max-[460px]:text-sm h-11 z-50">
        <a href="https://tushargupta.netlify.app" target="_blank"><p class="m-3 max-[460px]:m-0 text-white ">Built by tushargupta</p></a>
    </footer>
    <script>
   
        const loginform = document.getElementById('loginForm')
        loginform.addEventListener('submit',async (e)=>{
            
        e.preventDefault()
        let username1 = loginform.querySelector('input[name="username"]').value
        let password1 = loginform.querySelector('input[name="password"]').value
         username1 = username1.trim();
         

        data={
            username:username1,
            password:password1
        }
        params = {
             method:'post',
             headers:{
                'Content-Type':'application/json'
             },
             body: JSON.stringify(data)
          }

        url = 'https://xmeme-i4d8.onrender.com/login'

        fetch(url,params).then((response)=>{
            return response.json();
        }).then((data)=>{
        if(data.status){
             console.log(data.jwt) 
             document.cookie = "xmemeJwt="+data.jwt
             window.location="./feed.html"
        } 
        else{
           alert("Incorrect username or password!")
        }
        }).catch((err)=>{
            console.log(err)
        })
       
        loginform.querySelector('h2').innerHTML = 'User Login'
        })
        
   
    </script>

</body>
</html>